<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Journal de Bien-être au Travail</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React & ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Babel (for JSX) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { Calendar, TrendingUp, AlertTriangle, Lightbulb, ChevronRight, ChevronLeft, BarChart3, Edit3, Eye } = lucide;

    function WellbeingJournal() {
      const [currentDay, setCurrentDay] = useState(1);
      const [journalEntries, setJournalEntries] = useState({});
      const [viewMode, setViewMode] = useState('entry'); // 'entry', 'view', 'analysis'

      const moods = ['Joyeux', 'Énergique', 'Neutre', 'Fatigué', 'Irritable', 'Anxieux', 'Triste'];
      const bodyReactions = ['Maux de tête', 'Tension musculaire', 'Fatigue oculaire', 'Insomnie', 'Problèmes digestifs', 'Douleurs dorsales'];
      const mindReactions = ['Difficulté de concentration', 'Pensées répétitives', 'Irritabilité', 'Sentiment dépassé', 'Perte de motivation', 'Stress'];

      const saveEntry = (day, entry) => {
        setJournalEntries(prev => ({
          ...prev,
          [day]: { ...entry, date: new Date().toLocaleDateString() }
        }));
      };

      const getCurrentEntry = () => {
        return journalEntries[currentDay] || {
          energy: 3,
          mood: '',
          difficultSituations: '',
          bodyReaction: [],
          mindReaction: [],
          whatWouldHelp: '',
          positiveAspects: ''
        };
      };

      function JournalEntryForm() {
        const [entry, setEntry] = useState(getCurrentEntry());

        useEffect(() => {
          setEntry(getCurrentEntry());
        }, [currentDay]);

        const handleSave = () => {
          saveEntry(currentDay, entry);
          alert('Entrée sauvegardée pour le jour ' + currentDay);
        };

        return (
          <div className="space-y-6">
            <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border-l-4 border-blue-400">
              <h3 className="text-lg font-semibold text-blue-800 mb-2">Jour {currentDay} - Mon Journal</h3>
              <p className="text-blue-600 text-sm">Prenez quelques minutes pour réfléchir à votre journée de travail.</p>
            </div>

            {/* Énergie */}
            <div className="bg-white p-4 rounded-lg border border-gray-200">
              <label className="block text-sm font-medium text-gray-700 mb-3">
                Mon énergie du jour (1-5 étoiles)
              </label>
              <div className="flex space-x-2">
                {[1, 2, 3, 4, 5].map(star => (
                  <button
                    key={star}
                    onClick={() => setEntry({...entry, energy: star})}
                    className={`text-2xl transition-colors ${star <= entry.energy ? 'text-yellow-400' : 'text-gray-300'} hover:text-yellow-400`}
                  >
                    ⭐
                  </button>
                ))}
              </div>
            </div>

            {/* Humeur */}
            <div className="bg-white p-4 rounded-lg border border-gray-200">
              <label className="block text-sm font-medium text-gray-700 mb-3">Mon humeur générale</label>
              <select
                value={entry.mood}
                onChange={(e) => setEntry({...entry, mood: e.target.value})}
                className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              >
                <option value="">Sélectionnez votre humeur</option>
                {moods.map(mood => <option key={mood} value={mood}>{mood}</option>)}
              </select>
            </div>

            {/* Situations difficiles */}
            <div className="bg-white p-4 rounded-lg border border-gray-200">
              <label className="block text-sm font-medium text-gray-700 mb-3">Situations difficiles aujourd'hui</label>
              <textarea
                value={entry.difficultSituations}
                onChange={(e) => setEntry({...entry, difficultSituations: e.target.value})}
                placeholder="Décrivez les moments difficiles"
                className="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                rows="3"
              />
            </div>

            {/* Réactions corporelles */}
            <div className="bg-white p-4 rounded-lg border border-gray-200">
              <label className="block text-sm font-medium text-gray-700 mb-3">Réactions de mon corps</label>
              <div className="grid grid-cols-2 gap-2">
                {bodyReactions.map(reaction => (
                  <label key={reaction} className="flex items-center space-x-2">
                    <input
                      type="checkbox"
                      checked={entry.bodyReaction.includes(reaction)}
                      onChange={(e) => {
                        if (e.target.checked) {
                          setEntry({...entry, bodyReaction: [...entry.bodyReaction, reaction]});
                        } else {
                          setEntry({...entry, bodyReaction: entry.bodyReaction.filter(r => r !== reaction)});
                        }
                      }}
                      className="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                    />
                    <span className="text-sm text-gray-700">{reaction}</span>
                  </label>
                ))}
              </div>
            </div>

            {/* Réactions mentales */}
            <div className="bg-white p-4 rounded-lg border border-gray-200">
              <label className="block text-sm font-medium text-gray-700 mb-3">Réactions de mon esprit</label>
              <div className="grid grid-cols-2 gap-2">
                {mindReactions.map(reaction => (
                  <label key={reaction} className="flex items-center space-x-2">
                    <input
                      type="checkbox"
                      checked={entry.mindReaction.includes(reaction)}
                      onChange={(e) => {
                        if (e.target.checked) {
                          setEntry({...entry, mindReaction: [...entry.mindReaction, reaction]});
                        } else {
                          setEntry({...entry, mindReaction: entry.mindReaction.filter(r => r !== reaction)});
                        }
                      }}
                      className="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                    />
                    <span className="text-sm text-gray-700">{reaction}</span>
                  </label>
                ))}
              </div>
            </div>

            {/* Ce qui aurait aidé */}
            <div className="bg-white p-4 rounded-lg border border-gray-200">
              <label className="block text-sm font-medium text-gray-700 mb-3">Qu'est-ce qui m'aurait aidé ?</label>
              <textarea
                value={entry.whatWouldHelp}
                onChange={(e) => setEntry({...entry, whatWouldHelp: e.target.value})}
                placeholder="Une pause, du soutien, moins de pression..."
                className="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                rows="2"
              />
            </div>

            {/* Aspects positifs */}
            <div className="bg-white p-4 rounded-lg border border-gray-200">
              <label className="block text-sm font-medium text-gray-700 mb-3">Qu'est-ce qui m'a fait du bien aujourd'hui ?</label>
              <textarea
                value={entry.positiveAspects}
                onChange={(e) => setEntry({...entry, positiveAspects: e.target.value})}
                placeholder="Une réussite, une interaction positive..."
                className="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                rows="2"
              />
            </div>

            <button onClick={handleSave}
              className="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium">
              Sauvegarder cette entrée
            </button>
          </div>
        );
      }

      function JournalViewer() {
        const entries = Object.entries(journalEntries).map(([day, entry]) => ({day: parseInt(day), ...entry}));

        if (entries.length === 0) {
          return (
            <div className="text-center py-8">
              <Calendar className="mx-auto h-12 w-12 text-gray-400 mb-4" />
              <p className="text-gray-500">Aucune entrée enregistrée.</p>
            </div>
          );
        }

        return (
          <div className="space-y-4">
            <h3 className="text-lg font-semibold text-gray-800 mb-4">Mes entrées de journal</h3>
            {entries.sort((a,b)=>a.day-b.day).map(entry => (
              <div key={entry.day} className="bg-white p-4 rounded-lg border border-gray-200">
                <h4 className="font-medium text-gray-800">Jour {entry.day}</h4>
                <p className="text-sm">Énergie: {'⭐'.repeat(entry.energy)}</p>
                {entry.mood && <p className="text-sm"><strong>Humeur:</strong> {entry.mood}</p>}
                {entry.difficultSituations && <p className="text-sm"><strong>Situations difficiles:</strong> {entry.difficultSituations}</p>}
              </div>
            ))}
          </div>
        );
      }

      function AnalysisView() {
        const entries = Object.values(journalEntries);
        if (entries.length < 2) {
          return <p className="text-gray-500">Ajoutez au moins 2 entrées pour voir l'analyse.</p>;
        }

        const avgEnergy = entries.reduce((sum, e) => sum + e.energy, 0) / entries.length;

        return (
          <div className="bg-white p-4 rounded-lg border border-gray-200">
            <h3 className="text-lg font-semibold text-gray-800 mb-4">Analyse</h3>
            <p className="text-gray-700">Niveau d'énergie moyen: {avgEnergy.toFixed(1)} / 5</p>
          </div>
        );
      }

      return (
        <div className="max-w-4xl mx-auto p-6 bg-gray-50 min-h-screen">
          <div className="bg-white rounded-lg shadow-lg p-6">
            <h1 className="text-2xl font-bold text-gray-800 mb-2">Journal de Bien-être au Travail</h1>

            <div className="flex flex-wrap gap-2 mb-6 border-b border-gray-200 pb-4">
              <button onClick={() => setViewMode('entry')}
                className={`flex items-center px-4 py-2 rounded-lg ${viewMode==='entry'?'bg-blue-600 text-white':'bg-gray-100'}`}>
                <Edit3 className="h-4 w-4 mr-2" /> Saisir une entrée
              </button>
              <button onClick={() => setViewMode('view')}
                className={`flex items-center px-4 py-2 rounded-lg ${viewMode==='view'?'bg-blue-600 text-white':'bg-gray-100'}`}>
                <Eye className="h-4 w-4 mr-2" /> Voir mes entrées
              </button>
              <button onClick={() => setViewMode('analysis')}
                className={`flex items-center px-4 py-2 rounded-lg ${viewMode==='analysis'?'bg-blue-600 text-white':'bg-gray-100'}`}>
                <BarChart3 className="h-4 w-4 mr-2" /> Analyser
              </button>
            </div>

            {viewMode === 'entry' && (
              <div className="flex items-center justify-between mb-6 bg-gray-50 p-4 rounded-lg">
                <button onClick={() => setCurrentDay(Math.max(1,currentDay-1))}
                  disabled={currentDay===1}
                  className="flex items-center px-3 py-2 bg-white border border-gray-300 rounded-md disabled:opacity-50">
                  <ChevronLeft className="h-4 w-4" />
                </button>
                <span className="font-medium text-gray-800">Jour {currentDay}</span>
                <button onClick={() => setCurrentDay(currentDay+1)}
                  className="flex items-center px-3 py-2 bg-white border border-gray-300 rounded-md">
                  <ChevronRight className="h-4 w-4" />
                </button>
              </div>
            )}

            {viewMode === 'entry' && <JournalEntryForm />}
            {viewMode === 'view' && <JournalViewer />}
            {viewMode === 'analysis' && <AnalysisView />}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<WellbeingJournal />);
  </script>
</body>
</html>
